// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Exercise {
  id         Int     @id @default(autoincrement())
  name       String  @db.VarChar(255)
  isWeighted Boolean
  isTimed    Boolean
  Set        Set[]
  user       User?   @relation(fields: [userId], references: [id])
  userId     Int?
}

model Set {
  id         Int      @id @default(autoincrement())
  weight     Int?
  time       Int?
  reps       Int
  fail       Boolean?
  exercise   Exercise @relation(fields: [exerciseId], references: [id])
  exerciseId Int
  day        Set_Day? @relation(fields: [dayId], references: [id])
  dayId      Int?

}

model Set_Day {
  id    Int   @id @default(autoincrement())
  sets  Set[]
  day   Day   @relation(fields: [dayId], references: [id])
  dayId Int
}

model Day {
  id        Int         @id @default(autoincrement())
  name      String      @db.VarChar(255)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  sets      Set_Day[]
  routine   Day_Routine @relation(fields: [routineId], references: [id])
  routineId Int
}

model Day_Routine {
  id        Int     @id @default(autoincrement())
  days      Day[]
  dayId     Int
  routine   Routine @relation(fields: [routineId], references: [id])
  routineId Int
}

model Routine {
  id             Int           @id @default(autoincrement())
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  name           String        @db.VarChar(255)
  days           Day_Routine[]
  Routine_User   Routine_User  @relation(fields: [routine_UserId], references: [id])
  routine_UserId Int
}

model Routine_User {
  id       Int       @id @default(autoincrement())
  routines Routine[]
  User     User?     @relation(fields: [userId], references: [id])
  userId   Int?
}

model User {
  id       Int            @id @default(autoincrement())
  email    String         @unique
  password String
  name     String?
  routines Routine_User[]
  exercise Exercise[]
}
